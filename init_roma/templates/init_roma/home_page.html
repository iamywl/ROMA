{% extends 'base.html' %}

{% block content %}
<div class="main-container">
    <div class="welcome-header">
        <h1>안녕하세요, {{ user.username }}님!</h1>
        <p>프로젝트 ROMA에 오신 것을 환영합니다.</p>
    </div>

    <div class="card-grid">
        <a href="{% url 'my_page' %}" class="card">
            <h3>📝 내 체크리스트 작성</h3>
            <p>나의 생활 패턴과 룸메이트 선호도를 입력하여 프로필을 완성하세요.</p>
        </a>
        <div class="card">
            <h3>🔍 룸메이트 찾기 (구현 예정)</h3>
            <p>나와 잘 맞는 룸메이트를 추천받고 찾아보세요.</p>
        </div>
    </div>

    <!-- ===== 사용자 검색해서 채팅하기 ===== -->
    <div class="user-search-container">
        <h2>사용자 검색해서 채팅하기</h2>
        <p>채팅할 상대방의 아이디를 입력하고 '채팅 시작' 버튼을 눌러주세요.</p>

        <!-- 에러 메시지 표시 (View에서 전달받음) -->
        {% if messages %}
            {% for message in messages %}
                <div class="alert-error">{{ message }}</div>
            {% endfor %}
        {% endif %}

        <!-- 폼을 제출하면 'chat:search_user' URL로 POST 요청을 보냄 -->
        <form action="{% url 'chat:search_user' %}" method="post" class="search-form">
            {% csrf_token %}
            <input type="text" name="username" placeholder="상대방 아이디 입력" required>
            <button type="submit">채팅 시작</button>
        </form>
    </div>
    <!-- ===== 여기까지 추가 ===== -->

</div>
{% endblock %}